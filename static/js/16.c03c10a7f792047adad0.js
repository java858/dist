webpackJsonp([16],{"9hy1":function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="http://back.fkzzz.cn/",i={data:function(){return{dollStr:"",myDoll:[],account:"",mobile:"",name:"",iphone:"",wechat_openid:"",addShow:!1,addressShow:!1,province:"",city:"",district:"",address:"",address_id:"",charge:!1,show:!1,weixinShow:!0,otherShow:!1,discount:"",shoping:"",num:"",money:"",index:"",dollhistory:!1}},components:{},created:function(){var s=this,e=getCookie("userId");$.ajax({type:"GET",url:t+"useraddress/defaddress?user_id="+e,data$Type:"jsonp",data:{},success:function(e){var a=JSON.parse(e).status,t=JSON.parse(e).message;0==a?(s.addShow=!0,s.addressShow=!1):(s.addShow=!1,s.addressShow=!0,s.name=t.consignee,s.province=t.province,s.city=t.city,s.district=t.district,s.address=t.address,s.iphone=t.mobile,s.address_id=t.id)}})},mounted:function(){var s=this;"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?s.index=0:s.index=1;var e=getCookie("userId");$.ajax({type:"GET",url:t+"usercenter/getphonemiamond?user_id="+e,data$Type:"jsonp",data:{},success:function(e){var a=JSON.parse(e).message;s.account=a.account,null==a.mobile?s.mobile="":s.mobile=a.mobile,s.wechat_openid=a.wechat_openid}});var a=s.$route.query.id;s.dollId=a.toString(),$.ajax({type:"GET",url:t+"usercenter/playpack?pack_id="+s.dollId,data$Type:"jsonp",data:{},success:function(e){var a,t=JSON.parse(e).message;if(0==JSON.parse(e).status)s.dollhistory=!0;else{for(var i=0;i<t.length;i++){var r=parseInt(t[i].created_at),o=(a=void 0,(a=new Date(1e3*r)).getFullYear()+"/"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"/"+a.getDate()+" "+a.getHours()+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()));t[i].created_at=o}s.myDoll=t}}})},methods:{chargeDele:function(){this.charge=!1},weixin:function(){this.show=!0,this.otherShow=!1,this.index=0},other:function(){this.show=!1,this.otherShow=!0,this.index=1},paySure:function(){var s=getCookie("userId"),e=getCookie("wawajitoken"),a=this.myDoll.length,t=encodeURIComponent("https://fkzzz.cn/#/usercenter/payresults");switch(this.index){case 0:window.location.href="http://weixin.fkzzz.cn/wechatpay?user_id="+s+"&user_name="+this.account+"&user_phone="+this.mobile+"&goods_name=快递费&num="+this.num+"&amount="+this.money+"&discount="+this.discount*this.money+"&notify=http://weixin.fkzzz.cn/wechatpay/expressorder&pack_id="+this.dollStr+"&type=2&address_id="+this.address_id+"&wechat_openid="+this.wechat_openid+"&token="+e;break;case 1:window.location.href="http://weixin.fkzzz.cn/usercenter/playpackorder?user_id="+s+"&user_name="+this.account+"&user_phone="+this.mobile+"&goods_name=快递费&num="+a+"&amount=15&discount=15&notify=http://weixin.fkzzz.cn/admin/expressorder&nreturn="+t+"&pack_id="+this.dollStr+"&address_id="+this.address_id+"&wechat_openid="+this.open_id+"&token="+e}},sureMailBodyBack:function(){this.$router.go(-1)},addressBtn:function(){this.$router.push({path:"/usercenter/newAddress"})},changaddress:function(){this.$router.push({path:"/usercenter/changAddress",query:{id:this.address_id}})},submitBtn:function(){var s=this;if(1==s.addressShow){var e=[],a=getCookie("userId"),i=s.myDoll.length;s.myDoll.forEach(function(s){e.push(s.id)}),s.dollStr=e.toString(),i>=3?$.ajax({type:"POST",url:t+"usercenter/packorder",data$Type:"jsonp",data:{user_id:a,pack_id:s.dollStr,address_id:s.address_id},success:function(e){var a=JSON.parse(e);0===a.status?s.$layer.msg(a.message):1===a.status&&(s.$layer.msg("提交成功，发货中..."),window.history.go(-1))}}):0==i?s.$layer.msg("暂无提交订单!"):(s.charge=!0,s.shoping="快递费",s.num=i,s.money=15,s.discount=1)}else s.$alert("有地址才能邮寄哦亲!")}}},r={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"sureMailBody"},[t("div",{staticClass:"user-header"},[t("a",{staticClass:"nav-item1",on:{click:s.sureMailBodyBack}},[t("img",{staticClass:"game_1",attrs:{src:a("82+b")}})]),s._v(" "),t("a",{staticClass:"ordertails"},[s._v("确认邮寄")])]),s._v(" "),t("div",{staticClass:"sureMailMain"},[t("div",{directives:[{name:"show",rawName:"v-show",value:s.addShow,expression:"addShow"}],staticClass:"addxinxi",on:{click:s.addressBtn}},[t("img",{attrs:{src:a("n6r6")}}),s._v(" "),t("a",[s._v("添加地址信息")])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.addressShow,expression:"addressShow"}],staticClass:"management",attrs:{id:"management"}},[t("div",{staticClass:"consignee"},[t("a",[s._v("收货人："),t("span",[s._v(s._s(s.name))])]),t("a",[s._v(s._s(s.iphone))])]),s._v(" "),t("div",{staticClass:"shipping"},[t("a",[s._v("收货地址："+s._s(s.province+s.city+s.district+s.address)),t("span")])]),s._v(" "),t("div",{staticClass:"defaultAddress"},[t("p",{staticClass:"modify",on:{click:s.changaddress}},[s._v("更改收货人/地址"),t("img",{attrs:{src:a("MuFO")}})])])]),s._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:s.dollhistory,expression:"dollhistory"}],staticClass:"wudoll"},[s._v("暂无娃娃订单!")]),s._v(" "),t("div",{staticClass:"divclass"},s._l(s.myDoll,function(e){return t("div",{staticClass:"mailOrder"},[t("div",{staticClass:"orderHead"},[t("a",[s._v("申请时间:"+s._s(e.created_at))])]),s._v(" "),t("div",{staticClass:"orderBody"},[t("img",{attrs:{src:e.icon_url}}),s._v(" "),t("span",[t("a",[s._v(s._s(e.name))]),s._v(" "),t("a",[s._v("×"+s._s(e.num))])])]),s._v(" "),t("div",{staticClass:"orderFoot"},[t("a",[s._v("共"+s._s(e.num)+"件")])])])}))]),s._v(" "),t("div",{staticClass:"submitOrders"},[s._m(0),s._v(" "),t("div",{staticClass:"submit",on:{click:s.submitBtn}},[s._v("提交")])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.charge,expression:"charge"}],staticClass:"alert-charge"},[t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"charge-mask"},[t("div",{staticClass:"modal-header"},[t("p",[t("img",{attrs:{src:a("UZ7K")},on:{click:s.chargeDele}}),t("a",[s._v("确认订单")])])]),s._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"charge-t"},[t("span",[s._v("商品名："),t("a",[s._v(s._s(s.shoping))])])]),s._v(" "),t("div",{staticClass:"charge-t"},[t("span",[s._v("数   量："),t("a",[s._v(s._s(s.num))])])]),s._v(" "),t("div",{staticClass:"charge-t"},[t("span",[s._v("金   额："),t("a",[s._v(s._s(s.money)+"元")])])]),s._v(" "),t("div",{staticClass:"charge-way"},[t("ul",[t("li",{directives:[{name:"show",rawName:"v-show",value:s.weixinShow,expression:"weixinShow"}],on:{click:s.weixin}},[t("p",{staticClass:"zhifubao-l"},[t("img",{attrs:{src:a("7GQl")}}),t("a",[s._v("微信支付")])]),s._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"show"}],staticClass:"zhifubao-r"},[t("img",{attrs:{src:a("Rz17")}})])])])])]),s._v(" "),t("div",{staticClass:"modal-footer",on:{click:s.paySure}},[t("a",[s._v("确认支付")])])])])],1)])},staticRenderFns:[function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"packageMail"},[e("a",[this._v("满3只包邮")])])}]};var o=a("Z0/y")(i,r,!1,function(s){a("UQyk")},"data-v-4a4206ff",null);e.default=o.exports},UQyk:function(s,e){},n6r6:function(s,e){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAATlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////y8vIfHx/7+/uXl5fi4uLh4eFISEiZmZnL0urLAAAAEHRSTlMA7HQK9dvUontqPCfKlpXJIkRueQAAATtJREFUWMPt2WtugzAQBOA170eSDsGYcP+LViA1NIWydphfkb8DjAwGrB3kVVuXF5PBU2YuZd3Kv9KkwBuKJN2PqwzeZKqdyCbHCXkjfyQ4KZEXN5x2k1+uILhurpd21Q1IGlmkOUjyVGYVaKplgQY0Jl13hLcvBYgKkRYe+mG049BD10oN3ePeze4PqGopPdY35y2J+hpLuUA1dT8GaL7EQOWegSM0RjKo7DPQQpMJdN0KqhgYA2NgDNQC1+Oj87R3zsj2+AixPWdke3wEJvaHgVMXbDgMdOGB42GgDQ+09BWy7+FE32X2c6i/Kc7/TXFD/wEfhxgYA2NgDJzRBx/6aBY2PE768Egfb+kDuG9F4KzzqwjYJQa9ZqEXQeyqil6mses+diHJrkz5pS6/duYX4/zqnv9zgf774xuAG33FhvCjzAAAAABJRU5ErkJggg=="}});
//# sourceMappingURL=16.c03c10a7f792047adad0.js.map