{"version":3,"sources":["webpack:///src/components/usercenter/myPoints.vue","webpack:///./src/components/usercenter/myPoints.vue?98fc","webpack:///./src/components/usercenter/myPoints.vue"],"names":["getCookie","name","v","window","document","cookie","match","urlhost","myPoints","data","amcount","pointList","isMore","noRecord","clickNum","modalShow","chooseList","dayNum","startX","startY","moveEndX","moveEndY","X","Y","id","idx","components","myModal","mounted","_this","this","userId","$","ajax","type","url","data$Type","success","res","JSON","parse","console","log","status","list","message","i","length","timestamp","parseInt","created_at","time","format","mode","num","methods","goBack","$router","go","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","setDays","val","post","user_id","emulateJSON","then","catch","animate","height","scrollTop","getMore","page","push","start","e","targetTouches","pageX","pageY","move","Math","abs","currentTarget","children","width","padding-right","deleteRecord","listenToMyBoy","deleteSure","$layer","msg","splice","usercenter_myPoints","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","attrs","src","__webpack_require__","_v","change","_l","item","index","domProps","value","_s","touchmove","touchstart","remark","$event","directives","rawName","expression","text_l","text_r","mes","childSay","deletesure","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/27.90b77f5fa43ed635c395.js","sourcesContent":["<template>\r\n  <div class=\"pointBalance\">\r\n\r\n    <!-- 头部 -->\r\n    <div class=\"user-header\">\r\n      <a class=\"nav-item1\" @click=\"goBack\"><img src=\"../../assets/images/usercenter/game_1.png\"/></a>\r\n      <a class=\"title\">我的积分</a>\r\n      <select id=\"sel\" @change=\"setDays\">\r\n        <option :value=\"index\" v-for=\"(item,index) in chooseList\">{{item}}</option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- 背景图 -->\r\n    <div class=\"banner\">\r\n      <!-- 余额 -->\r\n      <div class=\"balance\">\r\n        <a>我的积分余额:</a>\r\n        <span>{{amcount}}</span>\r\n      </div>  \r\n    </div> <!-- end of diamondBalanceMain，小弹窗结束  -->\r\n\r\n    <!-- 主体区 -->\r\n    <div class=\"section\">\r\n      <div class=\"noRecord\" v-if=\"noRecord\">暂无积分纪录</div>\r\n      <div v-else>\r\n        <ul class=\"pointList\">\r\n          <li  @touchmove=\"move\" @touchstart=\"start\" v-for=\"(item,index) in pointList\">\r\n            <p>\r\n              <a>{{item.remark}}</a><br/>\r\n              <span>{{item.time}}</span>\r\n            </p>\r\n            <div class=\"right\">\r\n              <a class=\"tenNum\">{{item.num}}</a>\r\n              <span>积分</span>\r\n            </div>\r\n            <div class=\"delete\" @click=\"deleteRecord(item,index)\">删除</div>\r\n          </li>\r\n        </ul>\r\n        <div class=\"loadMore\" @click=\"getMore\" v-if=\"isMore\">点击加载更多</div>\r\n        <div class=\"noMore\" v-else>没有更多记录了</div>\r\n      </div>\r\n      <myModal text_l=\"不删了\" text_r=\"删了\" mes=\"确定删除该条充值记录?\" @childSay=\"listenToMyBoy\" @deletesure=\"deleteSure\" v-show=\"modalShow\"></myModal>\r\n    </div><!-- end of section -->\r\n  </div> <!-- end of diamondBalance(仅次于template的div) -->\r\n</template>\r\n<script>\r\n  // 专门到Cookie里拿东西，参数就是键名，返回对应的值，如wawajitoken、userId等\r\n  function getCookie(name) {\r\n    var v = window.document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\r\n    return v ? v[2] : null;\r\n  }\r\n\r\n  // 目前来讲，urlhost的值为：http://weixin.fkzzz.cn/\r\n  var urlhost = process.env.API_AJAX;\r\n\r\n  //引入模态层\r\n  import Modal from '../modals/modalStart.vue'\r\n  export default {\r\n    data() {\r\n      // 本页面要用到的所有变量\r\n      return {\r\n        amcount:0,              // 账户余额\r\n        pointList:null,         // 积分数组\r\n        isMore:null,            // 显示更多\r\n        noRecord:null,          // 判断是否有记录\r\n        clickNum:1,             // 记录点击更多按钮次数\r\n        modalShow:null,         // 模态层\r\n        chooseList:[\"当日明细\",\"最近三日\",\"最近七日\"],   //选择查看时间\r\n        dayNum:null,            // 选择的时间\r\n        startX:0,\r\n        startY:0,\r\n        moveEndX:0,\r\n        moveEndY:0,\r\n        X:0,\r\n        Y:0,\r\n        id:'',\r\n        idx:'',\r\n      }\r\n    },\r\n    components: {\r\n      myModal:Modal\r\n    },\r\n\r\n    mounted:function () {\r\n      var _this = this;\r\n      //从cookie里取出的用户的id\r\n      var userId = getCookie('userId');\r\n\r\n      //请求数据\r\n      $.ajax({\r\n        type: 'GET',\r\n        url: urlhost+\"usercenter/integralrecord?num=10&user_id=\"+userId,\r\n        data$Type: \"jsonp\",\r\n        success: function (res) {\r\n          var data = JSON.parse(res);\r\n          console.log(data);\r\n          if(data.status == 0){\r\n            _this.noRecord = true;\r\n          }else{\r\n            _this.noRecord = false;\r\n            var list = data.message;\r\n            console.log(list)\r\n\r\n            //循环处理时间，积分类型，积分数量\r\n            for(var i=0;i< list.length;i++){\r\n\r\n              //时间戳\r\n              var timestamp = parseInt(list[i].created_at);\r\n              list[i].time = _this.format(timestamp);\r\n              \r\n              //判断积分增减\r\n              if(list[i].mode == 1){\r\n                list[i].num = \"+\"+list[i].num;\r\n              }else{\r\n                list[i].num = -list[i].num;\r\n              }\r\n            }\r\n\r\n            _this.pointList = list;\r\n\r\n            //判断请求的数据长度\r\n            if(list.length<10){\r\n              _this.isMore = false;\r\n            }else{\r\n              _this.isMore = true;\r\n            }\r\n          }\r\n        },\r\n      }); // end of ajax\r\n    },  // end of mounted\r\n\r\n    methods:{\r\n      //返回上一步\r\n      goBack:function(){\r\n        this.$router.go(-1);\r\n      },\r\n\r\n      //获取时间\r\n      format:function(timestamp){\r\n        var date = new Date(timestamp * 1000);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n        var Y = date.getFullYear() + '/';\r\n        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '/';\r\n        var D = date.getDate() + ' ';\r\n        var h = date.getHours() + ':';\r\n        var m = date.getMinutes() < 10 ? '0'+(date.getMinutes()) : date.getMinutes();\r\n        return Y+M+D+h+m;\r\n      },\r\n\r\n      //选择天数范围\r\n      setDays:function(){\r\n\r\n        var i = $('#sel>option:selected').val();\r\n        var id;\r\n        if(i == 0){\r\n          this.dayNum = 0;\r\n        }else if(i == 1){\r\n          this.dayNum = 3;\r\n        }else if(i == 2){\r\n          this.dayNum = 7;\r\n        };\r\n\r\n        var _this = this;\r\n        var userId = getCookie(\"userId\");\r\n\r\n        //带上参数，用户id、每页条数num、选择区间time、页数page\r\n        var url= urlhost+\"/usercenter/integralrecord?user_id=\"+userId+\"&num=99999&time=\"+_this.dayNum;\r\n\r\n        $.post(url,{\"user_id\":userId,\"num\":10},{emulateJSON:true}).then((res)=>{\r\n          var data = JSON.parse(res);\r\n          var list = data.message;\r\n          var mode = data.mode;\r\n          console.log(list)\r\n\r\n          //判断请求状态为0时 或者 请求的数组长度小于等于10时\r\n          if(data.status == 0){\r\n            _this.noRecord = true;\r\n          }else{\r\n            _this.noRecord = false;\r\n            if(list.length<=10){\r\n              _this.isMore = false;\r\n            }\r\n            for(var i=0;i< list.length;i++){\r\n              var timestamp = parseInt(list[i].created_at);\r\n              list[i].time = _this.format(timestamp);\r\n              if(list[i].mode == 1){\r\n                list[i].num = \"+\"+list[i].num;\r\n              }else{\r\n                list[i].num = -list[i].num;\r\n              }\r\n            }\r\n            _this.pointList = list;\r\n          }\r\n          \r\n          //判断获取的数组长度，小于10条时没有更多框\r\n          if(list.length<10){\r\n            _this.isMore = false;\r\n          }else{\r\n            _this.isMore = true;\r\n          }\r\n\r\n        }).catch((res)=>{})\r\n\r\n        // var height = parseInt($('.mingxiList li').css('height'));\r\n        // console.log($('.mingxiList li').length)\r\n        $('.mingxiList').animate({'height':'100%',scrollTop:0},500);\r\n\r\n      },\r\n\r\n      //获取更多\r\n      getMore:function(){\r\n        var _this = this;\r\n        _this.clickNum++;\r\n        var page = _this.clickNum;\r\n        var userId = getCookie(\"userId\");\r\n        var url = urlhost+\"/usercenter/integralrecord\";\r\n\r\n        $.post(url,{\"page\":page,\"user_id\":userId,\"num\":10},{emulateJSON:true}).then((res)=>{\r\n          var data = JSON.parse(res);\r\n          var list = data.message;\r\n          var mode = data.mode;\r\n          console.log(data)\r\n          //判断请求状态为0时 或者 请求的数组长度小于等于10时\r\n          if(data.status == 0 || list.length<=10){\r\n            _this.isMore = false;\r\n          }\r\n          for(var i=0;i< list.length;i++){\r\n            var timestamp = parseInt(list[i].created_at);\r\n            list[i].time = _this.format(timestamp);\r\n            if(list[i].mode == 1){\r\n              list[i].num = \"+\"+list[i].num;\r\n            }else{\r\n              list[i].num = -list[i].num;\r\n            }\r\n            _this.pointList.push(list[i]);\r\n          }\r\n          \r\n          //判断获取的数组长度，小于10条时没有更多框\r\n          if(list.length<10){\r\n            _this.isMore = false;\r\n          }else{\r\n            _this.isMore = true;\r\n          }\r\n\r\n        }).catch((res)=>{})\r\n      },\r\n\r\n      //开始滑动\r\n      start:function (e) {\r\n        var _this = this\r\n        _this.startX = e.targetTouches[0].pageX;\r\n        _this.startY = e.targetTouches[0].pageY;\r\n      },\r\n\r\n      //滑动\r\n      move:function (e) {\r\n        var _this = this;\r\n        _this.moveEndX = e.targetTouches[0].pageX,\r\n          _this.moveEndY = e.targetTouches[0].pageY,\r\n          _this.X = _this.moveEndX - _this.startX,\r\n          _this.Y = _this.moveEndY - _this.startY;\r\n        if ( Math.abs(_this.X) > Math.abs(_this.Y) && _this.X > 0 ) {\r\n          $(e.currentTarget.children[2]).animate({'width':0},50);\r\n          $(e.currentTarget.children[1]).animate({'padding-right':'0'},50)\r\n        }else if ( Math.abs(_this.X) > Math.abs(_this.Y) && _this.X < 0 ) {\r\n          $(e.currentTarget.children[2]).animate({'width':'1.5rem'},50)\r\n          $(e.currentTarget.children[1]).animate({'padding-right':'1.5rem'},50)\r\n        }\r\n\r\n      },\r\n      deleteRecord:function(data,i) {\r\n        this.modalShow = true;\r\n        this.id = data.id;\r\n        this.idx = i;\r\n      },\r\n      listenToMyBoy:function () {\r\n        this.modalShow = false;\r\n        $('.delete').animate({\"width\":0},10);\r\n        $('.mailOrder').animate({'padding-right':'10px'},10)\r\n      },\r\n      deleteSure:function(){\r\n        var _this = this;\r\n        _this.modalShow = false;\r\n        var userId = getCookie(\"userId\");\r\n        $.ajax({\r\n          type: 'POST',\r\n          url: urlhost+\"usercenter/delintrecord?&intId=\"+_this.id,\r\n          data$Type: \"jsonp\",\r\n          success: function (res) {\r\n            var res = JSON.parse(res);\r\n            if(res.status == 0){\r\n              _this.$layer.msg(res.message);\r\n            }else{\r\n              _this.$layer.msg(res.message);\r\n              _this.pointList.splice(_this.idx, 1);\r\n\r\n              //判断payList长度\r\n              if(_this.pointList.length==0){\r\n                _this.noRecord=true;\r\n              }\r\n            }\r\n          },\r\n        })\r\n      },\r\n    }\r\n  } // end of export default\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @function n($n) {\r\n    @return $n  / 64 + rem;\r\n  };\r\n  .pointBalance{\r\n    position: fixed;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0px;\r\n    background: #fff;\r\n    .user-header{\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: n(80);\r\n      background: #fff001;\r\n      z-index: 999;\r\n      border-bottom: 1px solid #d8d8d8;\r\n      text-align: center;\r\n      .nav-item1{\r\n        position: absolute;\r\n        left: n(23);\r\n        top: 20%;\r\n        img{\r\n          width: n(50);\r\n          height: n(50);\r\n        }\r\n      }\r\n      .title{\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        height: n(80);\r\n        width: 100%;\r\n        line-height: n(80);\r\n      }\r\n      select{\r\n        position: absolute;\r\n        font-size: n(12);\r\n        right: n(10);\r\n        top: 30%;\r\n        width: n(130);\r\n      }\r\n\r\n    }\r\n    .banner{\r\n      margin-top: n(80);\r\n      width: 100%;\r\n      .balance{\r\n        width: 100%;\r\n        height: n(250);\r\n        background: url(\"http://fkzzz.oss-cn-qingdao.aliyuncs.com/img/1074835440.jpg\") no-repeat;\r\n        background-size: 100% 100%;\r\n        display: inline-flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        a{\r\n          font-weight: bold;\r\n        }\r\n        span{\r\n          font-size: n(32);\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n    .section{\r\n      .noRecord{\r\n        margin-top:40%;\r\n        text-align: center;\r\n        height: 100%;\r\n      }\r\n      .pointList{\r\n        width: 100%;\r\n        height: auto;\r\n        li{\r\n          position: relative;\r\n          display: inline-flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          width: 100%;\r\n          height: n(95);\r\n          border-bottom: n(1) solid #e4ece1;\r\n          color: #585858;\r\n          .right{\r\n            margin-right: n(20);\r\n            text-align: right;\r\n            a{\r\n              line-height: n(30);\r\n            }\r\n          }\r\n          p{\r\n            line-height: n(30);\r\n            margin-left: n(25);\r\n          }\r\n          .delete{\r\n            position: absolute;\r\n            top:0;\r\n            right: 0;\r\n            height: 100%;\r\n            display: inline-flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            background: #ff4e00;\r\n            color: #ffffff;\r\n            width: n(0);\r\n          }\r\n        }\r\n      }\r\n      .loadMore{\r\n        height:n(80);\r\n        line-height: n(80);\r\n        width: 100%;\r\n        text-align: center;\r\n        color: #1b1a1a;\r\n        background: #fff001;\r\n        font-weight: bold;\r\n      }\r\n      .noMore{\r\n        height: n(50);\r\n        line-height: n(50);\r\n        width: 100%;\r\n        text-align: center;\r\n        color: #666;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/usercenter/myPoints.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pointBalance\"},[_c('div',{staticClass:\"user-header\"},[_c('a',{staticClass:\"nav-item1\",on:{\"click\":_vm.goBack}},[_c('img',{attrs:{\"src\":require(\"../../assets/images/usercenter/game_1.png\")}})]),_vm._v(\" \"),_c('a',{staticClass:\"title\"},[_vm._v(\"我的积分\")]),_vm._v(\" \"),_c('select',{attrs:{\"id\":\"sel\"},on:{\"change\":_vm.setDays}},_vm._l((_vm.chooseList),function(item,index){return _c('option',{domProps:{\"value\":index}},[_vm._v(_vm._s(item))])}))]),_vm._v(\" \"),_c('div',{staticClass:\"banner\"},[_c('div',{staticClass:\"balance\"},[_c('a',[_vm._v(\"我的积分余额:\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.amcount))])])]),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[(_vm.noRecord)?_c('div',{staticClass:\"noRecord\"},[_vm._v(\"暂无积分纪录\")]):_c('div',[_c('ul',{staticClass:\"pointList\"},_vm._l((_vm.pointList),function(item,index){return _c('li',{on:{\"touchmove\":_vm.move,\"touchstart\":_vm.start}},[_c('p',[_c('a',[_vm._v(_vm._s(item.remark))]),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.time))])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('a',{staticClass:\"tenNum\"},[_vm._v(_vm._s(item.num))]),_vm._v(\" \"),_c('span',[_vm._v(\"积分\")])]),_vm._v(\" \"),_c('div',{staticClass:\"delete\",on:{\"click\":function($event){_vm.deleteRecord(item,index)}}},[_vm._v(\"删除\")])])})),_vm._v(\" \"),(_vm.isMore)?_c('div',{staticClass:\"loadMore\",on:{\"click\":_vm.getMore}},[_vm._v(\"点击加载更多\")]):_c('div',{staticClass:\"noMore\"},[_vm._v(\"没有更多记录了\")])]),_vm._v(\" \"),_c('myModal',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.modalShow),expression:\"modalShow\"}],attrs:{\"text_l\":\"不删了\",\"text_r\":\"删了\",\"mes\":\"确定删除该条充值记录?\"},on:{\"childSay\":_vm.listenToMyBoy,\"deletesure\":_vm.deleteSure}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-7cd9924b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/usercenter/myPoints.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7cd9924b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./myPoints.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./myPoints.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./myPoints.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7cd9924b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./myPoints.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7cd9924b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/usercenter/myPoints.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}