webpackJsonp([30],{"Emp+":function(t,e){},mjGZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="http://back.fkzzz.cn/",i={name:"payrecords",data:function(){return{payList:[],isDiamond:!0,modalShow:!1,isMore:!0,clickNum:1,startX:0,startY:0,moveEndX:0,moveEndY:0,X:0,Y:0,id:"",idx:"",isNoRecord:null}},components:{myModal:a("CkUG").a},mounted:function(){var t=this,e=getCookie("userId");$.ajax({type:"GET",url:s+"usercenter/payrecord?num=10&user_id="+e,data$Type:"jsonp",data:{},success:function(e){var a=JSON.parse(e).message;if(""==a)t.isNoRecord=!0;else{t.isNoRecord=!1;for(var s=0;s<a.length;s++){var i=parseInt(a[s].end_time),r=t.format(i);a[s].start_time=r,a[s].price=a[s].discount,a[s].getNum=a[s].num,a[s].extraNum=a[s].integral,1!=a[s].topup_type&&(t.isDiamond=!1)}}t.payList=a}})},methods:{format:function(t){var e=new Date(1e3*t);return e.getFullYear()+"/"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/")+(e.getDate()+" ")+(e.getHours()+":")+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())},payBack:function(){this.$router.go(-1)},start:function(t){this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY},move:function(t){this.moveEndX=t.targetTouches[0].pageX,this.moveEndY=t.targetTouches[0].pageY,this.X=this.moveEndX-this.startX,this.Y=this.moveEndY-this.startY,Math.abs(this.X)>Math.abs(this.Y)&&this.X>0?($(t.currentTarget.children[2]).animate({width:0},100),$(t.currentTarget).animate({"padding-right":"10px"},100)):Math.abs(this.X)>Math.abs(this.Y)&&this.X<0&&($(t.currentTarget.children[2]).animate({width:"1.5rem"},100),$(t.currentTarget).animate({"padding-right":"1.8rem"},100))},deleteRecord:function(t,e){this.modalShow=!0,this.id=t.id,this.idx=e},listenToMyBoy:function(){this.modalShow=!1,$(".delete").animate({width:0},10),$(".mailOrder").animate({"padding-right":"10px"},10)},deleteSure:function(t,e){var a=this;a.modalShow=!1;getCookie("userId");$.ajax({type:"POST",url:s+"usercenter/payrecorddel?user_id=121&order_id="+a.id,data$Type:"jsonp",success:function(t){0==(t=JSON.parse(t)).status?a.$layer.msg(t.message):(a.$layer.msg(t.message),a.payList.splice(a.idx,1),0==a.payList.length&&(a.isNoRecord=!0))}})},getMore:function(){var t=this;this.clickNum++;var e=this.clickNum;getCookie("userId");$.post("http://back.fkzzz.cn//usercenter/payrecord",{page:e,user_id:121,num:10},{emulateJSON:!0}).then(function(e){var a=JSON.parse(e),s=a.message;a.mode;0==a.status&&(t.isMore=!1);for(var i=0;i<s.length;i++){var r=parseInt(s[i].end_time),o=t.format(r);s[i].start_time=o,s[i].price=s[i].discount,s[i].getNum=s[i].num,s[i].extraNum=s[i].integral,1!=s[i].topup_type&&(t.isDiamond=!1),t.payList.push(s[i])}}).catch(function(t){})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payrecords"},[s("div",{staticClass:"user-header"},[s("a",{staticClass:"nav-item1",on:{click:t.payBack}},[s("img",{staticClass:"game_1",attrs:{src:a("82+b")}})]),t._v(" "),s("a",{staticClass:"ordertails"},[t._v("充值记录")])]),t._v(" "),s("div",{staticClass:"payrecordsMain"},[t.isNoRecord?s("div",{staticClass:"noRecord"},[t._v("暂无充值记录")]):s("div",[t._l(t.payList,function(e,a){return s("div",{staticClass:"mailOrder",on:{touchmove:t.move,touchstart:t.start}},[s("div",{staticClass:"orderHead"},[s("a",[t._v("订单号:"+t._s(e.channel_order))]),t._v(" "),s("div",[s("span",[t._v(t._s(e.num))]),t._v("钻 "),t.isDiamond?s("a",[t._v("( 送"+t._s(e.extraNum)+"钻 )")]):s("a",[t._v("(送"+t._s(e.extraNum)+"积分)")])])]),t._v(" "),s("div",{staticClass:"riqi"},[s("a",[t._v(t._s(e.start_time))]),t._v(" "),s("a",{staticClass:"price"},[t._v("￥"+t._s(e.price))])]),t._v(" "),s("div",{staticClass:"delete",on:{click:function(s){t.deleteRecord(e,a)}}},[t._v("删除")])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMore,expression:"isMore"}],staticClass:"loadMore",on:{click:t.getMore}},[t._v("点击加载更多")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMore,expression:"!isMore"}],staticClass:"noMore"},[t._v("没有更多记录了")])],2)]),t._v(" "),s("myModal",{directives:[{name:"show",rawName:"v-show",value:t.modalShow,expression:"modalShow"}],attrs:{text_l:"不删了",text_r:"删了",mes:"确定删除该条充值记录?"},on:{childSay:t.listenToMyBoy,deletesure:t.deleteSure}})],1)},staticRenderFns:[]};var o=a("Z0/y")(i,r,!1,function(t){a("Emp+")},"data-v-58595522",null);e.default=o.exports}});
//# sourceMappingURL=30.8417a896b27365ba591f.js.map