webpackJsonp([27],{HMKW:function(t,e){},bqtQ:function(t,e,s){"use strict";function a(t){var e=window.document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?e[2]:null}Object.defineProperty(e,"__esModule",{value:!0});var n="http://back.fkzzz.cn/",i={data:function(){return{amcount:0,pointList:null,isMore:null,noRecord:null,clickNum:1,modalShow:null,chooseList:["当日明细","最近三日","最近七日"],dayNum:null,startX:0,startY:0,moveEndX:0,moveEndY:0,X:0,Y:0,id:"",idx:""}},components:{myModal:s("CkUG").a},mounted:function(){var t=this,e=a("userId");$.ajax({type:"GET",url:n+"usercenter/integralrecord?num=10&user_id="+e,data$Type:"jsonp",success:function(e){var s=JSON.parse(e);if(console.log(s),0==s.status)t.noRecord=!0;else{t.noRecord=!1;var a=s.message;console.log(a);for(var n=0;n<a.length;n++){var i=parseInt(a[n].created_at);a[n].time=t.format(i),1==a[n].mode?a[n].num="+"+a[n].num:a[n].num=-a[n].num}t.pointList=a,a.length<10?t.isMore=!1:t.isMore=!0}}})},methods:{goBack:function(){this.$router.go(-1)},format:function(t){var e=new Date(1e3*t);return e.getFullYear()+"/"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/")+(e.getDate()+" ")+(e.getHours()+":")+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())},setDays:function(){var t=$("#sel>option:selected").val();0==t?this.dayNum=0:1==t?this.dayNum=3:2==t&&(this.dayNum=7);var e=this,s=a("userId"),i=n+"/usercenter/integralrecord?user_id="+s+"&num=99999&time="+e.dayNum;$.post(i,{user_id:s,num:10},{emulateJSON:!0}).then(function(t){var s=JSON.parse(t),a=s.message;s.mode;if(console.log(a),0==s.status)e.noRecord=!0;else{e.noRecord=!1,a.length<=10&&(e.isMore=!1);for(var n=0;n<a.length;n++){var i=parseInt(a[n].created_at);a[n].time=e.format(i),1==a[n].mode?a[n].num="+"+a[n].num:a[n].num=-a[n].num}e.pointList=a}a.length<10?e.isMore=!1:e.isMore=!0}).catch(function(t){}),$(".mingxiList").animate({height:"100%",scrollTop:0},500)},getMore:function(){var t=this;t.clickNum++;var e=t.clickNum,s=a("userId");$.post("http://back.fkzzz.cn//usercenter/integralrecord",{page:e,user_id:s,num:10},{emulateJSON:!0}).then(function(e){var s=JSON.parse(e),a=s.message;s.mode;console.log(s),(0==s.status||a.length<=10)&&(t.isMore=!1);for(var n=0;n<a.length;n++){var i=parseInt(a[n].created_at);a[n].time=t.format(i),1==a[n].mode?a[n].num="+"+a[n].num:a[n].num=-a[n].num,t.pointList.push(a[n])}a.length<10?t.isMore=!1:t.isMore=!0}).catch(function(t){})},start:function(t){this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY},move:function(t){this.moveEndX=t.targetTouches[0].pageX,this.moveEndY=t.targetTouches[0].pageY,this.X=this.moveEndX-this.startX,this.Y=this.moveEndY-this.startY,Math.abs(this.X)>Math.abs(this.Y)&&this.X>0?($(t.currentTarget.children[2]).animate({width:0},50),$(t.currentTarget.children[1]).animate({"padding-right":"0"},50)):Math.abs(this.X)>Math.abs(this.Y)&&this.X<0&&($(t.currentTarget.children[2]).animate({width:"1.5rem"},50),$(t.currentTarget.children[1]).animate({"padding-right":"1.5rem"},50))},deleteRecord:function(t,e){this.modalShow=!0,this.id=t.id,this.idx=e},listenToMyBoy:function(){this.modalShow=!1,$(".delete").animate({width:0},10),$(".mailOrder").animate({"padding-right":"10px"},10)},deleteSure:function(){var t=this;t.modalShow=!1;a("userId");$.ajax({type:"POST",url:n+"usercenter/delintrecord?&intId="+t.id,data$Type:"jsonp",success:function(e){0==(e=JSON.parse(e)).status?t.$layer.msg(e.message):(t.$layer.msg(e.message),t.pointList.splice(t.idx,1),0==t.pointList.length&&(t.noRecord=!0))}})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pointBalance"},[a("div",{staticClass:"user-header"},[a("a",{staticClass:"nav-item1",on:{click:t.goBack}},[a("img",{attrs:{src:s("82+b")}})]),t._v(" "),a("a",{staticClass:"title"},[t._v("我的积分")]),t._v(" "),a("select",{attrs:{id:"sel"},on:{change:t.setDays}},t._l(t.chooseList,function(e,s){return a("option",{domProps:{value:s}},[t._v(t._s(e))])}))]),t._v(" "),a("div",{staticClass:"banner"},[a("div",{staticClass:"balance"},[a("a",[t._v("我的积分余额:")]),t._v(" "),a("span",[t._v(t._s(t.amcount))])])]),t._v(" "),a("div",{staticClass:"section"},[t.noRecord?a("div",{staticClass:"noRecord"},[t._v("暂无积分纪录")]):a("div",[a("ul",{staticClass:"pointList"},t._l(t.pointList,function(e,s){return a("li",{on:{touchmove:t.move,touchstart:t.start}},[a("p",[a("a",[t._v(t._s(e.remark))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.time))])]),t._v(" "),a("div",{staticClass:"right"},[a("a",{staticClass:"tenNum"},[t._v(t._s(e.num))]),t._v(" "),a("span",[t._v("积分")])]),t._v(" "),a("div",{staticClass:"delete",on:{click:function(a){t.deleteRecord(e,s)}}},[t._v("删除")])])})),t._v(" "),t.isMore?a("div",{staticClass:"loadMore",on:{click:t.getMore}},[t._v("点击加载更多")]):a("div",{staticClass:"noMore"},[t._v("没有更多记录了")])]),t._v(" "),a("myModal",{directives:[{name:"show",rawName:"v-show",value:t.modalShow,expression:"modalShow"}],attrs:{text_l:"不删了",text_r:"删了",mes:"确定删除该条充值记录?"},on:{childSay:t.listenToMyBoy,deletesure:t.deleteSure}})],1)])},staticRenderFns:[]};var r=s("Z0/y")(i,o,!1,function(t){s("HMKW")},"data-v-7cd9924b",null);e.default=r.exports}});
//# sourceMappingURL=27.90b77f5fa43ed635c395.js.map